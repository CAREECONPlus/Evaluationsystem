<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Firebaseèªè¨¼çŠ¶æ…‹ç¢ºèª</title>
    
    <!-- Firebase Configuration Meta Tags -->
    <meta name="firebase-api-key" content="AIzaSyAK3wAWIZCultkSQfyse8L8Z-JNMEVK5Wk">
    <meta name="firebase-auth-domain" content="hyouka-db.firebaseapp.com">
    <meta name="firebase-project-id" content="hyouka-db">
    <meta name="firebase-storage-bucket" content="hyouka-db.appspot.com">
    <meta name="firebase-messaging-sender-id" content="861016804589">
    <meta name="firebase-app-id" content="1:861016804589:web:d911d516d6c79aa73690e4">
    
    <style>
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            max-width: 800px; 
            margin: 0 auto; 
            padding: 20px;
            line-height: 1.6;
        }
        .test-section { 
            background: #f5f5f5; 
            padding: 15px; 
            margin: 10px 0; 
            border-radius: 5px;
            border-left: 4px solid #007bff;
        }
        .success { border-left-color: #28a745; background: #d4edda; }
        .warning { border-left-color: #ffc107; background: #fff3cd; }
        .error { border-left-color: #dc3545; background: #f8d7da; }
        .info { border-left-color: #17a2b8; background: #d1ecf1; }
        pre { 
            background: #f8f9fa; 
            padding: 10px; 
            border-radius: 3px; 
            overflow-x: auto;
            font-size: 12px;
        }
        .btn {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        .btn:hover { background: #0056b3; }
        #console-output {
            background: #1e1e1e;
            color: #ffffff;
            padding: 15px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            white-space: pre-wrap;
            max-height: 400px;
            overflow-y: auto;
        }
    </style>
</head>
<body>
    <h1>ğŸ”¥ Firebaseèªè¨¼çŠ¶æ…‹ç¢ºèªã‚·ã‚¹ãƒ†ãƒ </h1>
    
    <div class="test-section info">
        <h3>ğŸ“‹ ç¢ºèªé …ç›®</h3>
        <ul>
            <li>Firebaseè¨­å®šã®èª­ã¿è¾¼ã¿çŠ¶æ³</li>
            <li>Firebaseèªè¨¼ã‚µãƒ¼ãƒ“ã‚¹ã®æ¥ç¶šæ€§</li>
            <li>æ—¢å­˜ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®ä½¿ç”¨å¯èƒ½æ€§</li>
            <li>ä¸€æ™‚èªè¨¼ã‚·ã‚¹ãƒ†ãƒ ã®å‹•ä½œçŠ¶æ³</li>
        </ul>
    </div>

    <div class="test-section">
        <h3>ğŸ¯ ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ</h3>
        <button class="btn" onclick="runTest()">èªè¨¼çŠ¶æ…‹ç¢ºèªé–‹å§‹</button>
        <button class="btn" onclick="clearConsole()">ãƒ­ã‚°ã‚¯ãƒªã‚¢</button>
    </div>

    <div class="test-section">
        <h3>ğŸ“Š çµæœè¡¨ç¤º</h3>
        <div id="console-output">ãƒ†ã‚¹ãƒˆã‚’é–‹å§‹ã—ã¦ãã ã•ã„...</div>
    </div>

    <div class="test-section">
        <h3>ğŸ”§ æŠ€è¡“è©³ç´°</h3>
        <p><strong>ç¾åœ¨ã®URL:</strong> <span id="current-url"></span></p>
        <p><strong>æ¤œå‡ºç’°å¢ƒ:</strong> <span id="detected-env"></span></p>
        <p><strong>Firebase ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ:</strong> hyouka-db</p>
        <p><strong>èªè¨¼ãƒ‰ãƒ¡ã‚¤ãƒ³:</strong> hyouka-db.firebaseapp.com</p>
    </div>

    <script src="env.js"></script>
    <script src="temp-auth.js"></script>
    <script type="module">
        import { testFirebaseAuth } from './firebase-auth-test.js';
        
        // ç¾åœ¨ã®ãƒšãƒ¼ã‚¸æƒ…å ±ã‚’è¡¨ç¤º
        document.getElementById('current-url').textContent = window.location.href;
        document.getElementById('detected-env').textContent = window.env ? window.env.getEnvironment() : 'æœªæ¤œå‡º';
        
        // ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ãƒ­ã‚°ã‚’ã‚­ãƒ£ãƒ—ãƒãƒ£
        const originalLog = console.log;
        const originalError = console.error;
        const originalWarn = console.warn;
        
        let consoleOutput = '';
        
        function captureLog(type, ...args) {
            const timestamp = new Date().toLocaleTimeString();
            const message = args.join(' ');
            consoleOutput += `[${timestamp}] ${type}: ${message}\n`;
            updateConsoleDisplay();
        }
        
        console.log = (...args) => {
            captureLog('LOG', ...args);
            originalLog.apply(console, args);
        };
        
        console.error = (...args) => {
            captureLog('ERROR', ...args);
            originalError.apply(console, args);
        };
        
        console.warn = (...args) => {
            captureLog('WARN', ...args);
            originalWarn.apply(console, args);
        };
        
        function updateConsoleDisplay() {
            document.getElementById('console-output').textContent = consoleOutput;
            document.getElementById('console-output').scrollTop = document.getElementById('console-output').scrollHeight;
        }
        
        window.runTest = async () => {
            consoleOutput = '';
            updateConsoleDisplay();
            
            console.log('ğŸš€ Firebaseèªè¨¼çŠ¶æ…‹ç¢ºèªãƒ†ã‚¹ãƒˆé–‹å§‹');
            console.log('====================================');
            
            try {
                const result = await testFirebaseAuth();
                
                console.log('====================================');
                console.log('âœ… ãƒ†ã‚¹ãƒˆå®Œäº†');
                console.log('çµæœ:', result);
                
            } catch (error) {
                console.error('âŒ ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã‚¨ãƒ©ãƒ¼:', error);
            }
        };
        
        window.clearConsole = () => {
            consoleOutput = '';
            updateConsoleDisplay();
        };
        
        // è‡ªå‹•ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
        window.addEventListener('load', () => {
            setTimeout(() => {
                console.log('ãƒšãƒ¼ã‚¸ãƒ­ãƒ¼ãƒ‰å®Œäº† - è‡ªå‹•ãƒ†ã‚¹ãƒˆã‚’é–‹å§‹ã—ã¾ã™...');
                runTest();
            }, 1000);
        });
    </script>
</body>
</html>